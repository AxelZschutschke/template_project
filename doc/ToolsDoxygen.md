# Doxygen {#Doxygen}

[TOC]

# Overview

Doxygen helps render code and project documentation into different output formats. Usually, the target format is a set
of "static" HTML sites, which are linked and referenced to each other. Doxygen is aware of language features of C-Style
languages, esp. C++.

Doxygen is developed by Dimitry van Heesch and released under the GNU general public license v2.0. However, the works
generated by Doxygen, e.g. the documents created, are not affected by this license.

## Get Doxygen

Get it from your OS's package store, most Linux distributions have doxygen available, e.g. via `apt install doxygen`.
It is recommended to install the graphviz (dot) packages as well, for doxygen to generate inline graphs of class
inheritance and/or manually created architecture overviews.

One may get doxygen as source distribution as well as [git repository](https://github.com/doxygen/doxygen.git), follow
the guides for compilation.

## Doxygen Configuration

Doxygen is controlled by a *Doxyfile*, containing all the project relevant configurations - from project name, input
directories up to color hue and intesity of the resulting documents.

The *Doxyfile* can be created as dummy using the command `doxygen -g`. The resulting file contains all relevant options
as blank fields, each well documented. Just open the file in your favorite editor and perform all relevant changes.
You may refer to the *Doxyfile* of this project to get an idea, see 'doc/Doxyfile.in' for details.

As most of the options are contained in the CMake environment already, it is easy to re-use the values (instead of 
maintaining two sets of the same variables): use CMake variables e.g. `${CMAKE_SOURCE_DIR}` in the *Doxyfile* and
let CMake handle the actual configuration, see next section as well!

## Enable Doxygen as Build Target

To enable Doxygen as a CMake/make target, add the following options to CMake. Note, that the line `configure_file(...)`
will replace all CMake variables in the template *Doxyfile.in* and create the actual *Doxyfile* to be used for the
build. Build the documentation by using `cmake -DDOXYGEN=ON <src_dir> && cmake --build . --target doc`

~~~~~.cmake
option( DOXYGEN            "Build documentation"       ON)
...
if ( DOXYGEN )
  # check if Doxygen is installed
  find_package(Doxygen)
  if (DOXYGEN_FOUND)
    # set input and output files
    set( DOXYGEN_IN 
      ${CMAKE_CURRENT_SOURCE_DIR}/doc/Doxyfile.in)
    set( DOXYGEN_OUT 
      ${CMAKE_CURRENT_BINARY_DIR}/Doxyfile)

    # request to configure the file
    configure_file(${DOXYGEN_IN} ${DOXYGEN_OUT})

    # note the option ALL which allows to build the docs together with the application
    add_custom_target( doc ALL
      COMMAND ${DOXYGEN_EXECUTABLE} ${DOXYGEN_OUT}
      WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
      COMMENT "Generating API documentation with Doxygen"
      VERBATIM )
  else (DOXYGEN_FOUND)
    message("Doxygen need to be installed to generate the doxygen documentation")
  endif (DOXYGEN_FOUND)
endif( DOXYGEN )
~~~~~

## Doxygen and GitHub

For GitHub hosted repositories, the documentation (html folder) may be pushed to a dedicated project branch (only
containing the documentation). The branch should be named *gh-pages* and will be published automatically as 
github pages related to the project.

